# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Repository Overview

Personal dotfiles repository for Linux systems (Arch + [omarchy](https://github.com/nicknisi/omarchy)), managed with [GNU Stow](https://www.gnu.org/software/stow/). Each config is organized as a stow package — install all or pick only what you need.

### Prerequisites

- **omarchy** — provides starship (prompt), eza (ls), mise (runtimes), fzf, zoxide, history, completions, aliases, and `$EDITOR=nvim`
- **GNU Stow** — `sudo pacman -S stow`

### Package Structure

| Package | Contents | Installs |
|---------|----------|----------|
| `bash/` | `.config/bash/rc` — Entry point: sources shell, envs, aliases | `~/.config/bash/rc` |
|         | `.config/bash/shell` — Shell options (checkwinsize) | `~/.config/bash/shell` |
|         | `.config/bash/envs` — Personal environment variables | `~/.config/bash/envs` |
|         | `.config/bash/aliases` — Personal aliases (grep --color) | `~/.config/bash/aliases` |
| `git/` | `.gitconfig` — Git configuration (default branch: main) | `~/.gitconfig` |
| `tmux/` | `.tmux.conf` — Tmux config with vim keybindings and Wayland/X11 clipboard auto-detection | `~/.tmux.conf` |

### Setup

```bash
git clone https://github.com/FerchoRiveraR/dotfiles.git ~/dotfiles
cd ~/dotfiles
stow -t ~ bash git tmux
```

Then add this line to omarchy's `~/.bashrc` (where it says "Add your own"):
```bash
source ~/.config/bash/rc
```

To uninstall:
```bash
stow -t ~ -D bash git tmux
```

## Architecture

### Shell Initialization Order (`.bashrc`)

1. Interactive check (omarchy)
2. Omarchy base config (`~/.local/share/omarchy/default/bash/rc`) — starship, eza, fzf, zoxide, mise, history, completions
3. `$HOME/.local/bin` added to PATH (omarchy)
4. Personal configs via `~/.config/bash/rc` → sources `{shell,envs,aliases}`

### Runtime Managers

Runtimes (Node.js, Ruby, Python) are managed by **mise** (installed via omarchy). No manual setup needed — `mise install` in a project directory picks up `.tool-versions` or `mise.toml`.

### Tmux Clipboard Integration

The `.tmux.conf` auto-detects the display server:
- **Wayland** (`$WAYLAND_DISPLAY` set): uses `wl-copy`
- **X11** (fallback): uses `xsel -i --clipboard`

Requires: `sudo pacman -S wl-clipboard xsel`

### Git Configuration

`.gitconfig` is minimal — only sets `init.defaultBranch = main`. Everything else is auto-generated by their respective tools:
- **Credentials**: `gh auth setup-git`
- **LFS**: `git lfs install`
- **User identity**: `git config --global user.name/email`
- **Editor**: uses `$EDITOR` (nvim, set by omarchy)

## Common Commands

```bash
# Reload shell config
source ~/.bashrc

# Reload tmux config (from inside tmux)
# prefix + r

# Install runtimes (via mise)
mise install node@lts
mise install ruby@latest
mise install python@latest
```

### Dependencies

```bash
# stow
sudo pacman -S stow

# Clipboard tools (for tmux)
sudo pacman -S wl-clipboard xsel
```

## Git Commit Guidelines

- **Do NOT include** "Co-Authored-By: Claude Code" or similar co-author attributions
- Use **Conventional Commits** format: `type(scope): description`
  - Types: `feat`, `fix`, `docs`, `chore`, `refactor`, `style`, `test`
  - Example: `feat(tmux): add session management keybinding`
